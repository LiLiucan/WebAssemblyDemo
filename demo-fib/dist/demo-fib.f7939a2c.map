{"version":3,"sources":["loader.js","fib.js","index.js"],"names":["loadWebAssembly","filename","imports","fetch","then","response","arrayBuffer","buffer","WebAssembly","compile","module","env","Object","assign","memoryBase","tableBase","memory","Memory","initial","maximum","table","Table","element","Instance","fib","n","FIB_NUM","cFibTime","instance","exports","_fib","startTime","Date","now","endTime","elCFib","document","querySelector","innerHTML","jsFibTime","leJsFib","init"],"mappings":"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","file":"demo-fib.f7939a2c.map","sourceRoot":"..","sourcesContent":["export default function loadWebAssembly(filename, imports = {}) {\n\treturn fetch(filename)\n\t\t.then((response) => response.arrayBuffer())\n\t\t.then((buffer) => WebAssembly.compile(buffer))\n\t\t.then((module) => {\n\t\t\timports.env = imports.env || {};\n\t\t\tObject.assign(imports.env, {\n\t\t\t\tmemoryBase: 0,\n\t\t\t\ttableBase: 0,\n\t\t\t\tmemory: new WebAssembly.Memory({ initial: 256, maximum: 256 }),\n\t\t\t\ttable: new WebAssembly.Table({ initial: 0, maximum: 0, element: 'anyfunc' })\n\t\t\t});\n\t\t\treturn new WebAssembly.Instance(module, imports);\n\t\t});\n}\n","export default function fib(n) {\n\tn = n | 0;\n\tif (n < 2) {\n\t\treturn 1;\n\t}\n\treturn ((fib(n - 2) | 0) + (fib(n - 1) | 0)) | 0;\n}\n","import loadWebAssembly from './loader';\nimport jsFib from './fib';\n\nconst FIB_NUM = 40;\n\nfunction cFibTime() {\n\tloadWebAssembly('fib.wasm').then((instance) => {\n\t\tconst fib = instance.exports._fib;\n\t\tconst startTime = Date.now();\n\t\tfib(FIB_NUM);\n\t\tconst endTime = Date.now();\n\t\tconst elCFib = document.querySelector('#cFib');\n\t\telCFib.innerHTML = `c fib 运行时长:  ${endTime - startTime}`;\n\t});\n}\n\nfunction jsFibTime() {\n\tconst startTime = Date.now();\n\tjsFib(FIB_NUM);\n\tconst endTime = Date.now();\n\tconst leJsFib = document.querySelector('#jsFib');\n\tleJsFib.innerHTML = `js fib 运行时长:  ${endTime - startTime}`;\n}\n\nfunction init() {\n\tcFibTime();\n\tjsFibTime();\n}\n\ninit();\n"]}